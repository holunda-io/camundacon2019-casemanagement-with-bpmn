<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_07seixz" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.3.2">
  <bpmn:collaboration id="Collaboration_0rsb9qy">
    <bpmn:participant id="Participant_0palvjt" name="Dept Recovery Process" processRef="deptRecoveryProcess" />
  </bpmn:collaboration>
  <bpmn:process id="deptRecoveryProcess" name="Dept Recovery Process" isExecutable="true" camunda:versionTag="1">
    <bpmn:extensionElements>
      <camunda:executionListener delegateExpression="${deptRecoveryProcess.onProcessStart()}" event="start" />
    </bpmn:extensionElements>
    <bpmn:startEvent id="StartEvent_1" name="Dept Recovery started">
      <bpmn:outgoing>SequenceFlow_1rn4vpd</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1rn4vpd" sourceRef="StartEvent_1" targetRef="milestone_deptPaid" />
    <bpmn:sequenceFlow id="SequenceFlow_1i5fojs" sourceRef="milestone_deptPaid" targetRef="UserTask_1w96lql" />
    <bpmn:endEvent id="EndEvent_1jqowfx" name="Dept Recovery ended">
      <bpmn:incoming>SequenceFlow_0ml49gv</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:intermediateCatchEvent id="milestone_deptPaid" name="dept paid">
      <bpmn:extensionElements>
        <camunda:executionListener delegateExpression="${onDeptPaid}" event="end" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1rn4vpd</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1i5fojs</bpmn:outgoing>
      <bpmn:conditionalEventDefinition camunda:variableName="deptPaid" camunda:variableEvent="change">
        <bpmn:condition xsi:type="bpmn:tFormalExpression">${deptRecovered == true}</bpmn:condition>
      </bpmn:conditionalEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0ml49gv" sourceRef="UserTask_1w96lql" targetRef="EndEvent_1jqowfx" />
    <bpmn:userTask id="UserTask_1w96lql" name="Send Goodbye Letter">
      <bpmn:incoming>SequenceFlow_1i5fojs</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0ml49gv</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:subProcess id="SubProcess_10db6w8" name="On Process Data change" triggeredByEvent="true">
      <bpmn:startEvent id="StartEvent_11ongo6" name="on change" isInterrupting="false">
        <bpmn:outgoing>SequenceFlow_0trxzni</bpmn:outgoing>
        <bpmn:conditionalEventDefinition camunda:variableName="processData" camunda:variableEvent="change">
          <bpmn:condition xsi:type="bpmn:tFormalExpression">${true}</bpmn:condition>
        </bpmn:conditionalEventDefinition>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="SequenceFlow_0trxzni" sourceRef="StartEvent_11ongo6" targetRef="Task_1fvrfwn" />
      <bpmn:serviceTask id="Task_1fvrfwn" name="Reevaluate" camunda:delegateExpression="${deptRecoveryProcess.onReevaluateSentries()}">
        <bpmn:incoming>SequenceFlow_0trxzni</bpmn:incoming>
      </bpmn:serviceTask>
    </bpmn:subProcess>
    <bpmn:subProcess id="doManualStart" name="Do manual Start" triggeredByEvent="true">
      <bpmn:startEvent id="StartEvent_0miy1fx" isInterrupting="false">
        <bpmn:outgoing>SequenceFlow_09zwu59</bpmn:outgoing>
        <bpmn:conditionalEventDefinition camunda:variableName="doManualStart" camunda:variableEvent="create">
          <bpmn:condition xsi:type="bpmn:tFormalExpression">${ doManualStart != null }</bpmn:condition>
        </bpmn:conditionalEventDefinition>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="SequenceFlow_09zwu59" sourceRef="StartEvent_0miy1fx" targetRef="Task_0fdwpmg" />
      <bpmn:serviceTask id="Task_0fdwpmg" name="Start Manually" camunda:delegateExpression="${manuallyStartTaskDelegate}">
        <bpmn:incoming>SequenceFlow_09zwu59</bpmn:incoming>
      </bpmn:serviceTask>
    </bpmn:subProcess>
    <bpmn:subProcess id="remindViaMail" name="Remind via Mail" triggeredByEvent="true">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="cmmnType" value="humanTask" />
          <camunda:property name="cmmnManualStart" value="true" />
          <camunda:property name="cmmnSentryOnPartExpression" value="${remindViaMailSentry.evaluate(execution)}" />
          <camunda:property name="cmmnRepetitionRule" value="manualStart" />
        </camunda:properties>
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionStart()}" event="start" />
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionComplete()}" event="end" />
      </bpmn:extensionElements>
      <bpmn:startEvent id="StartEvent_1riexnk" isInterrupting="false">
        <bpmn:outgoing>SequenceFlow_1vd7bq7</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1ypurda" signalRef="Signal_0mwkmea" />
      </bpmn:startEvent>
      <bpmn:userTask id="UserTask_1dwp2e6" name="Send Mail">
        <bpmn:incoming>SequenceFlow_1vd7bq7</bpmn:incoming>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="SequenceFlow_1vd7bq7" sourceRef="StartEvent_1riexnk" targetRef="UserTask_1dwp2e6" />
    </bpmn:subProcess>
    <bpmn:subProcess id="remindViaTelephone" name="Remind via Telephone" triggeredByEvent="true">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="cmmnType" value="humanTask" />
          <camunda:property name="cmmnManualStart" value="true" />
          <camunda:property name="cmmnSentryOnPartExpression" value="${remindViaTelephoneSentry.evaluate(execution)}" />
          <camunda:property name="cmmnRepetitionRule" value="manualStart" />
        </camunda:properties>
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionStart()}" event="start" />
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionComplete()}" event="end" />
      </bpmn:extensionElements>
      <bpmn:startEvent id="StartEvent_1skmbit" isInterrupting="false">
        <bpmn:outgoing>SequenceFlow_1dn45v8</bpmn:outgoing>
        <bpmn:signalEventDefinition signalRef="Signal_17ma8xt" />
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="SequenceFlow_1dn45v8" sourceRef="StartEvent_1skmbit" targetRef="Task_1ej60eu" />
      <bpmn:userTask id="Task_1ej60eu" name="Do Call">
        <bpmn:incoming>SequenceFlow_1dn45v8</bpmn:incoming>
      </bpmn:userTask>
    </bpmn:subProcess>
    <bpmn:subProcess id="sendHelloLetter" name="Send &#34;Hello&#34; Letter" triggeredByEvent="true">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="cmmnType" value="humanTask" />
          <camunda:property name="cmmnManualStart" value="true" />
        </camunda:properties>
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionStart()}" event="start" />
        <camunda:executionListener delegateExpression="${deptRecoveryProcess.onCaseExecutionComplete()}" event="end" />
      </bpmn:extensionElements>
      <bpmn:startEvent id="StartEvent_1sc68zf" isInterrupting="false">
        <bpmn:outgoing>SequenceFlow_11fdfeb</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0abdphw" signalRef="Signal_0z0uj6i" />
      </bpmn:startEvent>
      <bpmn:userTask id="UserTask_sendHelloLetter" name="Send hello Letter">
        <bpmn:extensionElements>
          <camunda:executionListener delegateExpression="${onHelloLetterSent}" event="end" />
        </bpmn:extensionElements>
        <bpmn:incoming>SequenceFlow_11fdfeb</bpmn:incoming>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="SequenceFlow_11fdfeb" sourceRef="StartEvent_1sc68zf" targetRef="UserTask_sendHelloLetter" />
    </bpmn:subProcess>
    <bpmn:textAnnotation id="TextAnnotation_1taposi">
      <bpmn:text>Todo: automatic start</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0k39klu" sourceRef="sendHelloLetter" targetRef="TextAnnotation_1taposi" />
  </bpmn:process>
  <bpmn:signal id="Signal_17ma8xt" name="remindViaTelephone_${execution.processInstanceId}" />
  <bpmn:signal id="Signal_0vym1cc" name="subprocess_sentry_reevaluation_${execution.processInstanceId}" />
  <bpmn:signal id="Signal_0mwkmea" name="remindViaMail_${execution.processInstanceId}" />
  <bpmn:signal id="Signal_0z0uj6i" name="sendHelloLetter_${execution.processInstanceId}" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0rsb9qy">
      <bpmndi:BPMNShape id="Participant_0palvjt_di" bpmnElement="Participant_0palvjt" isHorizontal="true">
        <dc:Bounds x="160" y="60" width="1050" height="740" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="229" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="211" y="145" width="73" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1rn4vpd_di" bpmnElement="SequenceFlow_1rn4vpd">
        <di:waypoint x="265" y="120" />
        <di:waypoint x="642" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1jqowfx_di" bpmnElement="EndEvent_1jqowfx">
        <dc:Bounds x="1112" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1094" y="145" width="73" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1i5fojs_di" bpmnElement="SequenceFlow_1i5fojs">
        <di:waypoint x="678" y="120" />
        <di:waypoint x="870" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_0jkchzn_di" bpmnElement="milestone_deptPaid">
        <dc:Bounds x="642" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="638" y="145" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_0cyxia6_di" bpmnElement="remindViaTelephone" isExpanded="true">
        <dc:Bounds x="560" y="260" width="270" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0uc8zqi_di" bpmnElement="StartEvent_1skmbit">
        <dc:Bounds x="582" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1dn45v8_di" bpmnElement="SequenceFlow_1dn45v8">
        <di:waypoint x="618" y="340" />
        <di:waypoint x="670" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1vo1lpc_di" bpmnElement="Task_1ej60eu">
        <dc:Bounds x="670" y="300" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1w96lql_di" bpmnElement="UserTask_1w96lql">
        <dc:Bounds x="870" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0ml49gv_di" bpmnElement="SequenceFlow_0ml49gv">
        <di:waypoint x="970" y="120" />
        <di:waypoint x="1112" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SubProcess_1knbmgj_di" bpmnElement="remindViaMail" isExpanded="true">
        <dc:Bounds x="900" y="260" width="270" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1riexnk_di" bpmnElement="StartEvent_1riexnk">
        <dc:Bounds x="922" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1dwp2e6_di" bpmnElement="UserTask_1dwp2e6">
        <dc:Bounds x="1010" y="300" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1vd7bq7_di" bpmnElement="SequenceFlow_1vd7bq7">
        <di:waypoint x="958" y="340" />
        <di:waypoint x="1010" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SubProcess_1agk1j1_di" bpmnElement="SubProcess_10db6w8" isExpanded="true">
        <dc:Bounds x="745" y="580" width="350" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_02h80qu_di" bpmnElement="StartEvent_11ongo6">
        <dc:Bounds x="785" y="662" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="777" y="705" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0trxzni_di" bpmnElement="SequenceFlow_0trxzni">
        <di:waypoint x="821" y="680" />
        <di:waypoint x="880" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0fmcwqo_di" bpmnElement="Task_1fvrfwn">
        <dc:Bounds x="880" y="640" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_1bfit0q_di" bpmnElement="doManualStart" isExpanded="true">
        <dc:Bounds x="220" y="640" width="360" height="140" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_096s93x_di" bpmnElement="StartEvent_0miy1fx">
        <dc:Bounds x="252" y="692" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_09zwu59_di" bpmnElement="SequenceFlow_09zwu59">
        <di:waypoint x="288" y="710" />
        <di:waypoint x="330" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0mmb113_di" bpmnElement="Task_0fdwpmg">
        <dc:Bounds x="330" y="670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_1rzjdjm_di" bpmnElement="sendHelloLetter" isExpanded="true">
        <dc:Bounds x="230" y="260" width="270" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1sc68zf_di" bpmnElement="StartEvent_1sc68zf">
        <dc:Bounds x="252" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0ao9a6k_di" bpmnElement="UserTask_sendHelloLetter">
        <dc:Bounds x="340" y="300" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_11fdfeb_di" bpmnElement="SequenceFlow_11fdfeb">
        <di:waypoint x="288" y="340" />
        <di:waypoint x="340" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_1taposi_di" bpmnElement="TextAnnotation_1taposi">
        <dc:Bounds x="360" y="480" width="100" height="40" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_0k39klu_di" bpmnElement="Association_0k39klu">
        <di:waypoint x="392" y="440" />
        <di:waypoint x="404" y="480" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
